<!-- HTML header for doxygen 1.9.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DarkRift: Commands</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=DM+Sans&display=swap" rel="stylesheet">
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="dr2_stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="dr2_logo.svg"/></td>
  <td id="projectalign">
   <div id="projectname">DarkRift<span id="projectnumber">&#160;2.11.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_advanced_plugin_system_commands.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Commands </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >Plugins can accept commands in a similar way to the sniffer and plugins controller does (in fact, since they are implemented as plugins it's exactly the same way). This guide will show you how that can be done with your own plugins.</p>
<p >To add commands to the server we must specify them as an overridden property, similar to how Name and Version are defined. In your plugin class you should add code similar to: </p><div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keyword">override</span> Command[] Commands =&gt; <span class="keyword">new</span> Command[]</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">new</span> Command(<span class="stringliteral">&quot;HighScores&quot;</span>, <span class="stringliteral">&quot;Retreives the high scores from the game.&quot;</span>, <span class="stringliteral">&quot;Highscores (-limit=&lt;count&gt;)&quot;</span>, HighScoresCommandHandler)</div>
<div class="line">};</div>
</div><!-- fragment --><p> All we do here is override the default command list (which is empty) with our own. In each command entry we specify: the name of the command (what you type in), a description and command usage string to be shown in the help command, and lastly a method that should be called when the server administrator types in this command. The command name is case insensitive however arguments are not.</p>
<p >The handler for the command should look similar to: </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> HighScoresCommandHandler(<span class="keywordtype">object</span> sender, CommandEventArgs e)</div>
<div class="line">{</div>
<div class="line">    </div>
<div class="line">}</div>
</div><!-- fragment --><p> The CommandEventArgs holds the arguments passed with the command and provides a few methods to access them. Flags, with or without values (e.g. <code>-i</code> and <code>-i=10</code>) can be found in the Flags property which will give you a NameValueCollection where the value is null if it wasn't specified with an argument.</p>
<p >Arguments will contain any non-flag like arguments (e.g. <code>uninstall</code>) in the order they were defined.</p>
<p >You can also get the original command passed in and the raw arguments all together.</p>
<p >There are no extra steps to adding the new commands to the <code>help</code> command since this is automatically generated at search time. Hence, you should be able to immediately run:</p>
<p ><code>help highscores</code></p>
<p >And you should see the help strings you added earlier.</p>
<p >Should you need to indicate to the user that a syntax error has occured then you should throw a CommandSyntaxException and DarkRift will show the user the usage text set in the command and any message you supply. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5 </li>
  </ul>
</div>
</body>
</html>
